<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login</title>
<style>
body { font-family: Arial, sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; background:#1a0000; color:white; }
.container { background:#2a0000; padding:30px; border-radius:12px; text-align:center; box-shadow:0 0 20px #ff0000; }
input { padding:10px; width:200px; margin:10px 0; border-radius:8px; border:none; }
button { padding:10px 20px; border:none; border-radius:8px; background:#ff0000; color:white; font-weight:bold; cursor:pointer; }
button:hover { background:#ff3333; }
</style>
</head>
<body>
<div class="container">
    <h2>Login</h2>
    <input type="text" id="inputKey" placeholder="Enter your key"><br>
    <button onclick="login()">Login</button>
</div>

<script>
async function login() {
    const inputKey = document.getElementById("inputKey").value.trim();
    if(!inputKey){ alert("กรุณากรอก Key"); return; }

    try {
        const res = await fetch('keys.json');
        const keys = await res.json();

        const keyObj = keys.find(k => k.key === inputKey);
        if(!keyObj){ alert("❌ Key ไม่ถูกต้อง"); return; }

        const expired = new Date(keyObj.expire) < new Date();
        if(expired){ alert("❌ Key หมดอายุ"); return; }

        alert("✅ Login สำเร็จ!");
        localStorage.setItem("loginKey", inputKey); // เก็บคีย์ไว้
        window.location.href = "dashboard.html";
    } catch(err) {
        alert("❌ ไม่สามารถโหลด keys.json");
        console.error(err);
    }
}
</script>
</body>
</html>
